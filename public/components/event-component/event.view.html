<div id="eventView" class="ac-page">

    <div ncy-breadcrumb></div>


    <!-- HEADER-->
    <section class="row header-section">

        <div class="col-xs-12">

            <!-- FORM CONTROL BUTTONS -->
            <div class="pull-right">

                <div class="btn btn-info" gt-editor-button gt-type="save" form-editor="$ctrl.eventFormEditor">
                    <i class="fa fa-floppy-o" aria-hidden="true"></i>
                    Save
                </div>

                <div class="btn btn-info" gt-editor-button gt-type="cancel-edit" form-editor="$ctrl.eventFormEditor">
                    Cancel
                </div>

                <div class="btn btn-info" gt-editor-button gt-type="edit" form-editor="$ctrl.eventFormEditor">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                    Edit
                </div>

                <div class="btn btn-danger" gt-editor-button gt-type="delete" form-editor="$ctrl.eventFormEditor">
                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                    Delete
                </div>

            </div>

        </div>

    </section>

    <!-- FORM -->
    <section class="row gt-form">

        <div class="col-sm-8 no-padding">
            <br/><br/>

            <!-- TITLE -->
            <div class="row">

                <label for="title" class="col-sm-3">
                    Title:
                </label>

                <div class="col-sm-7">
                    <input ng-model="$ctrl.event.event_subject"
                           gt-editor-input="$ctrl.eventFormEditor" id="title" class="form-control"/>
                </div>
            </div>

            <!-- TYPE -->
            <div class="row">

                <label for="type" class="col-sm-3">
                    Type:
                </label>

                <div class="col-sm-7">

                    <ui-select ng-model="$ctrl.selectedEventType"
                               id="type" search-enabled="false" class="gt-container"
                               ng-disabled="!$ctrl.eventFormEditor.isEditing()">
                        <ui-select-match>{{$ctrl.selectedEventType.name}}</ui-select-match>
                        <ui-select-choices repeat="eventType in $ctrl.eventTypes">
                            {{eventType.name}}
                        </ui-select-choices>
                    </ui-select>

                </div>
            </div>


            <!-- COMMENT -->
            <div class="row">

                <label for="comment" class="col-sm-3">
                    Comment:
                </label>

                <div class="col-sm-7">
                    <textarea ng-model="$ctrl.event.event_comment"
                              gt-editor-input="$ctrl.eventFormEditor" id="comment" class="form-control"></textarea>
                </div>
            </div>


        </div>

        <!-- EVENT DATE-->
        <div class="col-sm-4 no-padding text-center">

            <div ng-disabled="!$ctrl.eventFormEditor.isEditing()" uib-datepicker
                 ng-model="$ctrl.eventDate" datepicker-options="$ctrl.datePickerOptions"></div>

        </div>


    </section>


    <!-- CONTENT AND ATTACHMENTS -->
    <section class="row divider-section gt-form">

        <div class="col-sm-8 no-padding">
            <div class="row">
                <label for="content" class="col-xs-12">
                    Content:
                </label>
            </div>


            <!-- TYNY MCE EDITOR -->
            <div class="gt-tinymce-container" ng-disabled="!$ctrl.eventFormEditor.isEditing()">
                <textarea ng-disabled="!$ctrl.eventFormEditor.isEditing()" class="gt-tinymce"
                          gt-editor-input="$ctrl.eventFormEditor" id="content"
                          ui-tinymce="$ctrl.tinymceOptions" ng-model="$ctrl.event.event_text"></textarea>
            </div>

        </div>


        <div class="col-sm-4 no-padding attachments-container">

            <div class="row">
                <label class="col-xs-12">
                    Attachments:
                </label>
            </div>


            <div class="attachments">

                <!-- EVENT'S ATTACHMENTS -->
                <div style="padding-bottom: 20px; overflow: hidden;">
                    <div ng-if="$ctrl.event" class="attachment row" ng-repeat="attachment in $ctrl.event.files">
                        <i ng-show="$ctrl.eventFormEditor.isEditing()"
                           class="hoverable-btn clickable delete-icon fa fa-times col-xs-1 no-padding text-center"
                           aria-hidden="true" ng-click="$ctrl.removeAttachment(attachment)"></i>
                        <i ng-show="$ctrl.eventFormEditor.isReadOnly()"
                           class="hoverable-btn clickable download-icon fa fa-download col-xs-1 no-padding text-center"
                           aria-hidden="true" ng-click="$ctrl.downloadAttachment(attachment)"></i>
                        <i class="file-icon fa fa-paperclip col-xs-1 no-padding text-center" aria-hidden="true"></i>

                        <span class="file-name no-padding col-xs-10">
                            {{attachment.originalName}}
                        </span>
                    </div>

                    <!-- LOADING FILES -->
                    <div ng-hide="$ctrl.event">
                        <div class="text-center">
                            <div class="preloader-wrapper small active">
                                <div class="spinner-layer spinner-blue-only">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- NOT ATTACHMENTS FOUND LABEL -->
                    <h5 class="text-center" ng-show="$ctrl.event && $ctrl.event.files.length <= 0">
                        <i class="file-icon fa fa-paperclip" aria-hidden="true"></i>
                        No Attachments Yet
                    </h5>
                </div>

                <!-- ADD ATTACHMENT BUTTON-->
                <div class="text-center btn btn-info add-attachment-button block" ng-click="$ctrl.uploadAttachment()"
                     ng-show="$ctrl.eventFormEditor.isEditing()">
                    <i class="fa fa-upload" aria-hidden="true"></i>
                    Add Attachment
                    <input ng-show="false" id = "addAttachment" type = "file" multiple
                           file-on-change = "$ctrl.onAttachmentsUploaded" />
                </div>

            </div>

        </div>

    </section>


    <!-- INVITES -->
    <section class="row divider-section gt-form">

        <div ng-show="$ctrl.eventFormEditor.isEditing()" class="btn btn-info" ng-click="$ctrl.editInvitees()">
            <i class="fa fa-users" aria-hidden="true"></i>
            Edit Invites
        </div>

        <div class="invites-table">

            <div class = "row" ng-show="$ctrl.eventFormEditor.isEditing()">

                <label class="col-sm-2 control-label">
                    <i class="fa fa-envelope-o" aria-hidden="true"></i>
                    Send Invitation To:
                </label>

                <p class = "col-sm-10" style = "margin-bottom: 0;">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-model="$ctrl.event.notifyNew">
                        New Invitees
                    </label>
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-model="$ctrl.event.notifyUpdated">
                        Updated Invitees
                    </label>
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-model="$ctrl.event.notifyDeleted">
                        Canceled Invitees
                    </label>
                </p>

            </div>


            <table dt-instance="$ctrl.inviteesDT.dtInstance" datatable dt-options="$ctrl.inviteesDT.options"
                   dt-columns="$ctrl.inviteesDT.columns"
                   class="table border-less dataTable">
            </table>
        </div>

    </section>

</div>